[
 {
  "allow_guest": 0,
  "api_method": "address",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.108105",
  "module": "Migoo CRM",
  "name": "Lead Address",
  "reference_doctype": null,
  "script": "address_title=frappe.form_dict[\"address_title\"]\naddress_line1=frappe.form_dict[\"address_line1\"]\naddress_line2=frappe.form_dict[\"address_line2\"]\narea=frappe.form_dict[\"area\"]\ncity=frappe.form_dict[\"city\"]\nstate=frappe.form_dict[\"state\"]\n\nname=frappe.form_dict[\"name\"]\n\ntitle=address_title+\"-Billing\"\n\na = frappe.get_doc({\"doctype\":\"Address\",\"address_title\":address_title,\"address_line1\":address_line1,\"address_line2\":address_line2,\"city\":city, \"area\":area,\n\"state\":state})\n\na.insert()\n\nparent = frappe.get_doc('Address', title)\nparent.append(\"links\", {\n    'link_doctype': 'Lead',\n    'link_name': name,\n    # 'link_title':'Sahil Patel'\n    \n})\nparent.save()\nfrappe.db.commit()\n",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "model_no",
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.126019",
  "module": "Migoo CRM",
  "name": "Item",
  "reference_doctype": null,
  "script": "category=frappe.form_dict[\"category\"]\ndata=frappe.db.sql(\"\"\"select name  from `tabItem Group` where parent_item_group=%s \"\"\",category);\n\nlist1=\"\"\nfor i in data:\n   \n    for j in i:\n        if list1==\"\":\n           \n            list1=j\n        else:\n            list1 = list1 + \",\" + j\n         \n\nx = list1.split(\",\")\nif list1==\"\":\n    info1=0\n  \nelse:\n    info1 = (len(x))\naaa=(str(info1))\n\nfrappe.response[\"message\"]=info1",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "supplier",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.154308",
  "module": "Migoo CRM",
  "name": "User Permissions",
  "reference_doctype": null,
  "script": "user=frappe.form_dict[\"user\"]\nsupplier=frappe.form_dict[\"supplier\"]\ndata=frappe.get_doc({\"doctype\":\"User Permission\",\"user\":user,\"allow\":\"Supplier\",\"for_value\":supplier})\ndata.insert()",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "contact-us123",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.084174",
  "module": "Migoo CRM",
  "name": "Contact Us",
  "reference_doctype": null,
  "script": "# data1 = frappe.form_dict[\"requesttype\"]\n# data2 = frappe.form_dict[\"fname\"]\n# data3 = frappe.form_dict[\"lname\"]\n# data4 = frappe.form_dict[\"company\"]\n# data5 = frappe.form_dict[\"email\"]\n# data6 = frappe.form_dict[\"mobile\"]\n# data7 = frappe.form_dict[\"textarea\"]\n\n\n\n# data = frappe.new_doc(\"Lead\")\n\n# data.request=data1\n# data.first_name=data2\n# data.last_name = data3\n# data.company_name = data4\n# data.email_address = data5\n# data.mobile_no = data6\n# data.supplier_notes = data7\n\n\n# data.save()\n\n# frappe.db.commit()\n\ndata1 = frappe.form_dict[\"requesttype\"]\ndata2 = frappe.form_dict[\"fname\"]\ndata3 = frappe.form_dict[\"lname\"]\ndata4 = frappe.form_dict[\"company\"]\ndata5 = frappe.form_dict[\"email\"]\ndata6 = frappe.form_dict[\"mobile\"]\ndata7 = frappe.form_dict[\"textarea\"]\ndata8 = frappe.form_dict[\"equipment\"]\ndata9 = frappe.form_dict[\"nowdate\"]\nwats = frappe.form_dict['wp']\n\n# frappe.msgprint(data9)\n\n# data = frappe.new_doc(\"Lead\")\n\n# data.request=data1\n# data.first_name=data2\n# data.last_name = data3\n# data.company_name = data4\n# data.email_address = data5\n# data.mobile_no = data6\n# data.supplier_notes = data7\n\n\n# data.save()\n\n# frappe.db.commit()\n\n\n\nif wats == \"\":\n    data = frappe.new_doc(\"Inquiry Form\")\n\n\n    data.request=data1\n    data.first_name=data2\n    data.last_name = data3\n    data.company_name = data4\n    data.email_address = data5\n    data.mobile_no = data6\n    data.supplier_notes = data7\n    data.item_detail = data8\n    data.curdate = data9\n    data.inquiry_source = \"Website Inquiry\"\n    \n    data.save()\n    \n    frappe.db.commit()\nelse:\n    data = frappe.new_doc(\"Inquiry Form\")\n\n\n    data.request=data1\n    data.first_name=data2\n    data.last_name = data3\n    data.company_name = data4\n    data.email_address = data5\n    data.mobile_no = data6\n    data.supplier_notes = data7\n    data.wpnumber = wats\n    data.item_detail = data8\n    data.curdate = data9\n    data.inquiry_source = \"Website Inquiry\"\n    \n    data.save()\n    \n    frappe.db.commit()\n\n",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "supplier_registration",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.066738",
  "module": "Migoo CRM",
  "name": "Supplier Register",
  "reference_doctype": null,
  "script": "# data1 = frappe.form_dict[\"suppliertype\"]\n# data2 = frappe.form_dict[\"company\"]\n# data3 = frappe.form_dict[\"fname\"]\n# data4 = frappe.form_dict[\"email\"]\n# data5 = frappe.form_dict[\"mobile\"]\n\n# data = frappe.new_doc(\"Supplier\")\n# # data.lead_name = data1 + data2\n# data.supplier_type=data1\n# data.company_name=data2\n# data.supplier_name = data3\n# data.email = data4\n# data.phone_no = data5\n\n# data.save()\n\t\n# frappe.db.commit()\n\ndata1 = frappe.form_dict[\"suppliertype\"]\ndata2 = frappe.form_dict[\"company\"]\ndata3 = frappe.form_dict[\"fname\"]\ndata4 = frappe.form_dict[\"email\"]\ndata5 = frappe.form_dict[\"mobile\"]\nwp = frappe.form_dict[\"wp\"]\n\n# frappe.msgprint(wp)\n\ndata = frappe.new_doc(\"Supplier\")\n# data.lead_name = data1 + data2\ndata.supplier_type=data1\ndata.company_name=data2\ndata.supplier_name = data3\ndata.email = data4\ndata.phone_no = data5\ndata.whatsapp_no = wp\n\ndata.save()\n\t\nfrappe.db.commit()",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "name",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.143167",
  "module": "Migoo CRM",
  "name": "Capital Register no",
  "reference_doctype": null,
  "script": "name=frappe.form_dict[\"name1\"]\nname12=name.upper()\nfrappe.response[\"message\"]=name12",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "login1",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.134700",
  "module": "Migoo CRM",
  "name": "Role profile",
  "reference_doctype": null,
  "script": "data1 = frappe.form_dict[\"email\"]\nd=frappe.db.sql(\"\"\"select role_profile_name from `tabUser` where email =%s \"\"\",data1)\nlist1 = \"\"            \nfor i in d:\n    for j in i:\n        if list1==\"\":\n            list1=j\n\nfrappe.response[\"role\"]=list1",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "contact-us1",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.051520",
  "module": "Migoo CRM",
  "name": "Item Inquiry",
  "reference_doctype": null,
  "script": "# data1 = frappe.form_dict[\"requesttype\"]\n# data2 = frappe.form_dict[\"fname\"]\n# data3 = frappe.form_dict[\"lname\"]\n# data5 = frappe.form_dict[\"email\"]\n# data6 = frappe.form_dict[\"mobile\"]\n# data7 = frappe.form_dict[\"textarea\"]\n# data8 = frappe.form_dict[\"equipment\"]\n# data9 = frappe.form_dict[\"company\"]\n\n\n# data = frappe.new_doc(\"Lead\")\n\n\n# data.request=data1\n# data.first_name=data2\n# data.last_name = data3\n# data.email_address = data5\n# data.mobile_no = data6\n# data.supplier_notes = data7\n# data.item_details = data8\n# data.company_name = data9\n\n# data.save()\n\n# frappe.db.commit()\n\nrequest = frappe.form_dict[\"requesttype\"]\nfname = frappe.form_dict[\"fname\"]\nlname = frappe.form_dict['lname']\nemail = frappe.form_dict[\"email\"]\nmobile_no = frappe.form_dict[\"mobile\"]\ncompany = frappe.form_dict[\"company\"]\nnotes = frappe.form_dict[\"textarea\"]\nwp = frappe.form_dict['wp']\nnowdate = frappe.form_dict['nowdate']\nequipment = frappe.form_dict['equipment']\n\n# frappe.msgprint(wp)\n# if wp != \"\":\ndata2 = frappe.new_doc(\"Inquiry Form\")\ndata2.request=request\ndata2.first_name=fname\ndata2.last_name = lname\ndata2.email_address = email\ndata2.mobile_no = mobile_no\ndata2.company_name = company\ndata2.supplier_notes = notes\ndata2.wpnumber = wp\ndata2.curdate = nowdate\ndata2.inquiry_source = \"Equipment Inquiry\"\ndata2.item_details = equipment\n    \ndata2.save()\nfrappe.db.commit()\n    \n# frappe.msgprint(\"worked\")",
  "script_type": "API"
 },
 {
  "allow_guest": 1,
  "api_method": "validation",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.117619",
  "module": "Migoo CRM",
  "name": "Email Validation For Supplier",
  "reference_doctype": null,
  "script": "email1=frappe.form_dict[\"email\"]\n\nd=frappe.db.sql(\"\"\"select email from `tabSupplier` where email=%s\"\"\",email1)\n\nlist1 = \"\"            \nfor i in d:\n    for j in i:\n        if list1==\"\":\n            list1=j\nfrappe.response[\"eid\"]=list1",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "user_number",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.095618",
  "module": "Migoo CRM",
  "name": "User Number Fetch",
  "reference_doctype": null,
  "script": "user=frappe.form_dict[\"user_number\"]\n\nd=frappe.db.sql(\"\"\"select phone from `tabUser` where email=%s\"\"\",user)\nlist1 = \"\"           \nfor i in d:\n    for j in i:\n        if list1==\"\":\n            list1=j\n            \n\n# info1=(int(list1))\nfrappe.response[\"message\"]=list1",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "inquiry",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:49.954890",
  "module": "Migoo CRM",
  "name": "Inquiry Form for CRM",
  "reference_doctype": null,
  "script": "frappe.msgprint(\"inquiry\")\r\rrequest = frappe.form_dict[\"request\"]\rfname = frappe.form_dict[\"fname\"]\rlname = frappe.form_dict['lname']\remail = frappe.form_dict[\"email\"]\rmobile_no = frappe.form_dict[\"mobile\"]\rcompany = frappe.form_dict[\"company\"]\rnotes = frappe.form_dict[\"notes\"]\requip = frappe.form_dict['equipment']\r# countrycode = frappe.form_dict[\"code\"]\rdt = frappe.form_dict[\"date\"]\rwp = frappe.form_dict['watsappno']\rlead_source = frappe.form_dict['inquiry_source']\rnm=frappe.form_dict[\"nm\"]\r\r    \rfrappe.msgprint(nm)\r\rleadup = \"\"\rcheck_opp = \"\"\ropportunity = \"\"\rlist1=\"\"\rcustomeropp = \"\"\rcust = \"\"\rop = \"\"\r\rcustomer = frappe.db.sql(\"select customer_name from `tabCustomer` where whatsapp_no = %s OR phone=%s \",(mobile_no,mobile_no))\rdk2 = frappe.db.sql(\"select name from `tabLead` where status != 'Converted' AND status != 'Opportunity' AND email_id = %s\" ,email)\rdk3 = frappe.db.sql(\"select name from `tabLead` where email_id=%s \",email )\rdk = frappe.db.sql(\"select name from `tabLead` where status = 'Converted' AND email_id=%s \",email )\r\r\rfor a1 in dk2:\r    for b1 in a1:\r        if leadup==\"\":\r            leadup=b1\rfor a1 in dk3:\r    for b1 in a1:\r        if check_opp==\"\":\r            check_opp=b1\r            \r\r#====================== opportunity update date wise ==========================\r\r# opp = frappe.db.sql(\"select name from `tabOpportunity` where party_name = %s AND transaction_date=%s\",(check_opp,dt))\r# for obj in opp:\r#     for p in obj:\r#         if opportunity == \"\":\r#             opportunity=p\r            \rfor i in dk:\r    for j in i:\r        if list1==\"\":\r            list1=j\r\rfor c in customer:\r    for d in c:\r        if cust==\"\":\r            cust = d\r            \r# ======================= customer opportunity date wise ====================\r\r# dk4 = frappe.db.sql(\"select name from `tabOpportunity` where party_name=%s AND transaction_date=%s\",(cust,dt))\r# for a2 in dk4:\r#     for b2 in a2:\r#         if customeropp==\"\":\r#             customeropp=b2  \r          \rfrappe.msgprint(customeropp) \r\rif leadup != \"\":\r    \r    frappe.msgprint(\"lead update\")\r    doc1 = frappe.get_doc('Lead', leadup)\r    doc1.append('equipment_inquiry', {\r        'equipment_name': equip,\r        'inquiry_date':dt\r    })\r    doc1.save()\r    frappe.db.commit()\r    frappe.response['message'] = \"success\"        \r        \r    frappe.msgprint(\"Lead is Updated\")\r\r\r#====================== Customer opportunity update date wise ==========================\r\r# elif customeropp!=\"\":\r#     doc = frappe.get_doc('Opportunity', customeropp)\r#     doc.append('item_inquiry', {\r#         'equipment_name': equip,\r#         #  'request_type':request,\r#         'inquiry_date':dt\r#     })\r#     doc.save()\r    \r    \r#     frappe.db.commit()\r \r    \r#     frappe.response['message'] = \"success\"\r    \r#     frappe.msgprint(\"Customer Opportunity is update\")\r    \relif cust != \"\":\r    data = frappe.new_doc(\"Opportunity\")\r    data.opportunity_from = \"Customer\"\r    data.party_name = cust\r    data.inquiry_connect=nm\r    data.save()\r    \r    doc = frappe.get_doc('Opportunity', data.name)\r    doc.append('item_inquiry', {\r        'equipment_name': equip,\r        #  'request_type':request,\r        'inquiry_date':dt\r    })\r    doc.save()\r    \r    \r    frappe.db.commit()\r \r    \r    frappe.response['message'] = \"success\"\r    \r    frappe.msgprint(\"Customer Opportunity is Created\")\r    \r\r#====================== opportunity update date wise ==========================\r\r# elif opportunity != \"\":\r  \r#     # if equip == \"\":\r#     doc3 = frappe.get_doc('Opportunity', opportunity)\r    \r#     doc3.append('item_inquiry', {\r#         'equipment_name': equip,\r#         'inquiry_date':dt\r#     })\r#     frappe.msgprint(\"test\")\r#     doc3.save()\r#     frappe.db.commit()\r#     frappe.response['message'] = \"success\"        \r        \r#     frappe.msgprint(\"opportunity is Update\")\r\r\r    \relif check_opp != \"\":\r     dataop = frappe.new_doc(\"Opportunity\")\r     dataop.opportunity_from = \"Lead\"\r     dataop.party_name = check_opp\r     dataop.inquiry_connect=nm\r     dataop.save()\r     doc3 = frappe.get_doc('Opportunity', dataop.name)\r     doc3.append('item_inquiry', {\r        'equipment_name': equip,\r        'inquiry_date':dt\r     })\r     frappe.msgprint(\"test\")\r     doc3.save()\r     frappe.db.commit()\r     frappe.msgprint(\"opportunity is Create\") \r\r\relse:\r    \r    data2 = frappe.new_doc(\"Lead\")\r    data2.request=request\r    data2.first_name=fname\r    data2.last_name = lname\r    data2.email_id = email\r    data2.mobile_no = mobile_no\r    data2.company_name = company\r    data2.supplier_notes = notes\r    data2.whatsapp_no = wp\r    data2.inquiry_connect=nm\r        \r    data2.save()\r    frappe.msgprint(data2.inquiry_connect)\r    doc2 = frappe.get_doc('Lead', data2.name)\r    doc2.append('equipment_inquiry', {\r        'equipment_name': equip,\r        'inquiry_date':dt\r        })\r    frappe.msgprint(\"New Lead is created\")\r    doc2.save()\r    frappe.db.commit()\r    \r    \r",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "contact_inquiry",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:49.998716",
  "module": "Migoo CRM",
  "name": "Contact Inquiry for CRM",
  "reference_doctype": null,
  "script": "frappe.msgprint(\"contact_inquiry\")\rrequest = frappe.form_dict[\"request\"]\rfname = frappe.form_dict[\"fname\"]\rlname = frappe.form_dict['lname']\remail = frappe.form_dict[\"email\"]\rmobile_no = frappe.form_dict[\"mobile\"]\requip = frappe.form_dict['equipment']\rcompany = frappe.form_dict[\"company\"]\rnotes = frappe.form_dict[\"notes\"]\rdt = frappe.form_dict['date']\rwp = frappe.form_dict['watsappno']\rnm=frappe.form_dict[\"nm\"]\rfrappe.msgprint(nm)\r\rleadup = \"\"\rcheck_opp = \"\"\ropportunity = \"\"\rlist1=\"\"\rcustomeropp = \"\"\rcust = \"\"\rop = \"\"\r\rcustomer = frappe.db.sql(\"select customer_name from `tabCustomer` where whatsapp_no = %s OR phone=%s \",(mobile_no,mobile_no))\rdk2 = frappe.db.sql(\"select name from `tabLead` where status != 'Converted' AND status != 'Opportunity' AND email_id = %s\" ,email)\rdk3 = frappe.db.sql(\"select name from `tabLead` where email_id=%s \",email )\rdk = frappe.db.sql(\"select name from `tabLead` where status = 'Converted' AND email_id=%s \",email )\r\r\rfor a1 in dk2:\r    for b1 in a1:\r        if leadup==\"\":\r            leadup=b1\rfor a1 in dk3:\r    for b1 in a1:\r        if check_opp==\"\":\r            check_opp=b1\r            \r#======================== Opportunity is update ======================\r\r# opp = frappe.db.sql(\"select name from `tabOpportunity` where party_name = %s AND transaction_date=%s\",(check_opp,dt))\r# for obj in opp:\r#     for p in obj:\r#         if opportunity == \"\":\r#             opportunity=p\r            \rfor i in dk:\r    for j in i:\r        if list1==\"\":\r            list1=j\r\rfor c in customer:\r    for d in c:\r        if cust==\"\":\r            cust = d\r\r#======================== Customer Opportunity is update ======================            \r# dk4 = frappe.db.sql(\"select name from `tabOpportunity` where party_name=%s AND transaction_date=%s\",(cust,dt))\r# for a2 in dk4:\r#     for b2 in a2:\r#         if customeropp==\"\":\r#             customeropp=b2  \r\r\r            \r\r           \rfrappe.msgprint(customeropp) \r\rif leadup != \"\":\r    \r    frappe.msgprint(\"lead update\")\r    doc1 = frappe.get_doc('Lead', leadup)\r    doc1.append('item_inquiry', {\r        'equipment_name': request,\r        'inquiry_date':dt\r    })\r    doc1.save()\r    frappe.db.commit()\r    frappe.response['message'] = \"success\"        \r        \r    frappe.msgprint(\"Lead is Updated\")\r\r\r#======================== Customer Opportunity is update ======================            \r\r# elif customeropp!=\"\":\r#     doc = frappe.get_doc('Opportunity', customeropp)\r#     doc.append('item_inquiry', {\r#         'equipment_name': request,\r#         #  'request_type':request,\r#         'inquiry_date':dt\r#     })\r#     doc.save()\r    \r    \r#     frappe.db.commit()\r \r    \r#     frappe.response['message'] = \"success\"\r    \r#     frappe.msgprint(\"Customer Opportunity is update\")\r    \relif cust != \"\":\r    data = frappe.new_doc(\"Opportunity\")\r    data.opportunity_from = \"Customer\"\r    data.party_name = cust\r    data.phone = mobile_no\r    data.inquiry_connect=nm\r    data.save()\r    doc = frappe.get_doc('Opportunity', data.name)\r    doc.append('item_inquiry', {\r        'equipment_name': request,\r        #  'request_type':request,\r        'inquiry_date':dt\r    })\r    doc.save()\r    \r    \r    frappe.db.commit()\r \r    \r    frappe.response['message'] = \"success\"\r    \r    frappe.msgprint(\"Customer Opportunity is Created\")\r    \r\r#======================== Opportunity is update ======================      \relif opportunity != \"\":\r  \r    # if equip == \"\":\r    doc3 = frappe.get_doc('Opportunity', opportunity)\r    \r    doc3.append('item_inquiry', {\r        'equipment_name': request,\r        'inquiry_date':dt\r    })\r    frappe.msgprint(\"test\")\r    doc3.save()\r    frappe.db.commit()\r    frappe.response['message'] = \"success\"        \r        \r    frappe.msgprint(\"opportunity is Update\")\r    \r    \relif check_opp != \"\":\r     dataop = frappe.new_doc(\"Opportunity\")\r     dataop.opportunity_from = \"Lead\"\r     dataop.party_name = check_opp\r     dataop.inquiry_connect=nm\r     dataop.save()\r     doc3 = frappe.get_doc('Opportunity', dataop.name)\r     doc3.append('item_inquiry', {\r        'equipment_name': request,\r        'inquiry_date':dt\r     })\r     frappe.msgprint(\"test\")\r     doc3.save()\r     frappe.db.commit()\r     frappe.msgprint(\"opportunity is Create\") \r    \r   \r\relse:\r    \r    data2 = frappe.new_doc(\"Lead\")\r    data2.request=request\r    data2.first_name=fname\r    data2.last_name = lname\r    data2.email_id = email\r    data2.mobile_no = mobile_no\r    data2.company_name = company\r    data2.supplier_notes = notes\r    data2.whatsapp_no = wp\r    data2.inquiry_connect=nm\r        \r    data2.save()\r    frappe.msgprint(\"Foram\")\r    frappe.msgprint(data.inquiry_connect)\r    doc2 = frappe.get_doc('Lead', data2.name)\r    doc2.append('item_inquiry', {\r        'equipment_name': request,\r        'inquiry_date':dt\r        })\r    frappe.msgprint(\"New Lead is created\")\r    doc2.save()\r    frappe.db.commit()\r        \r  \r    \r    \r",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "website_item",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.025901",
  "module": "Migoo CRM",
  "name": "Website Item",
  "reference_doctype": null,
  "script": "# frappe.msgprint(\"Hello\")\nname=frappe.form_dict[\"name\"]\nitem_group=frappe.form_dict[\"item_group\"]\nprice=frappe.form_dict[\"standard_rate\"]\nmaker_model=frappe.form_dict[\"maker_model\"]\nvehicle_class=frappe.form_dict[\"vehicle_class\"]\nowner_count=frappe.form_dict[\"owner_count\"]\nmodel=frappe.form_dict[\"model\"]\nsub=frappe.form_dict[\"sub\"]\nfitness_dt=frappe.form_dict[\"fitness_dt\"]\ninsurance_date=frappe.form_dict[\"insurance_date\"]\nmanufacturing_date=frappe.form_dict[\"manufacturing_date\"]\nregistration_date=frappe.form_dict[\"registration_date\"]\nequipment_condition=frappe.form_dict[\"equipment_condition\"]\nequipment_current_reading=frappe.form_dict[\"equipment_current_reading\"]\nlocation=frappe.form_dict[\"location\"]\nshort_description=frappe.form_dict[\"short_description\"]\nimg1 = frappe.form_dict[\"img1\"]\nimg2 = frappe.form_dict[\"img2\"]\nimg3 = frappe.form_dict[\"img3\"]\n\n\nlist1=[img1,img2,img3]\n\ndata = frappe.new_doc(\"Website Slideshow\")\ndata.slideshow_name=name\ndata.save()\ndoc = frappe.get_doc('Website Slideshow', data.name)\nfor i in list1:\n    doc.append('slideshow_items', {\n    'image': i,\n        #  'request_type':request\n    })\n\n\n    doc.save()\n    frappe.db.commit()\nasd=data.name\n\nd=frappe.db.sql(\"\"\"select supplier from `tabItem` where name=%s\"\"\",name)\nlist11 = \"\"           \nfor i in d:\n    for j in i:\n        if list11==\"\":\n            list11=j\n# frappe.msgprint(list1)\ndd = frappe.db.sql(\"\"\"select mobile_number from `tabSupplier` where name=%s\"\"\",list11)\nlist2 = []     \nfor ii in dd:\n    for jj in ii:\n        if list2==[]:\n            list2=jj\n            \nddd = frappe.db.sql(\"\"\"select supplier_name from `tabSupplier` where name=%s\"\"\",list11)\nlist3 = \"\"     \nfor iii in ddd:\n    for jjj in iii:\n        if list3==\"\":\n            list3=jjj     \n\na = frappe.get_doc({\"doctype\":\"Website Item\",\"web_item_name\":sub,\"item_code\":name,\"item_name\":name,\"description\":name, \"item_group\":item_group,\n\"website_image\":img1,\"slideshow\":asd,\n\"equipment_condition\":equipment_condition,\"location\":location,\"short_description\":short_description,\"description\":short_description})\n\na.insert()\n\nlabel1=[\"Price\",\"Equipment Id\",\"Ownership\",\"Manufacture Date\",\"Brand\",\"Current Location\",\"Posted By\",\"Insurance\",\"Type\",\"Condition\",\"Current Reading\",\"Negotiable\",\"Supplier Name\",\"Supplier Phone Number\"]\nvalue = [price, name, owner_count,manufacturing_date,model,location,\"Owner\",insurance_date,vehicle_class,equipment_condition,equipment_current_reading,\"Yes\",list3,list2]\nlabel12=len(label1)\ndoc1 = frappe.get_doc('Website Item', a.name)\n\nfor jj in range(label12):\n        doc1.append('website_specifications', {\n        \"label\" : label1[jj],\n        \"description\" : value[jj]\n        })\n        \ndoc1.save()\nfrappe.db.commit()\nfrappe.msgprint(\"Website Item Create\")",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "suppler_mo_no",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.039767",
  "module": "Migoo CRM",
  "name": "Supplier details fetch",
  "reference_doctype": null,
  "script": "item=frappe.form_dict[\"item\"]\n\nd=frappe.db.sql(\"\"\"select supplier from `tabItem` where name=%s\"\"\",item)\nlist11 = \"\"           \nfor i in d:\n    for j in i:\n        if list11==\"\":\n            list11=j\nfrappe.msgprint(list1)\ndd = frappe.db.sql(\"\"\"select mobile_number from `tabSupplier` where name=%s\"\"\",list11)\nlist2 = []     \nfor ii in dd:\n    for jj in ii:\n        if list2==[]:\n            list2=jj\n            \nddd = frappe.db.sql(\"\"\"select supplier_name from `tabSupplier` where name=%s\"\"\",list11)\nlist3 = \"\"     \nfor iii in ddd:\n    for jjj in iii:\n        if list3==\"\":\n            list3=jjj            \n\nno=str(list2)\nfrappe.response[\"message\"]=list3\nfrappe.response[\"msg\"]=no\n# frappe.msgprint(list3)",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "opp_reference",
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "event_frequency": "All",
  "modified": "2023-01-12 15:27:50.015695",
  "module": "Migoo CRM",
  "name": "Reference",
  "reference_doctype": null,
  "script": "request = frappe.form_dict[\"name1\"]\nnm=frappe.form_dict[\"nm\"]\n\nfrappe.msgprint(request)\n\nlist1=\"\"\nlist2=\"\"\n\ndk4 = frappe.db.sql(\"select name from `tabOpportunity` where party_name=%s\",request)\nfor i in dk4:\n    for j in i:\n        if list1==\"\":\n            list1=j\n        else:\n            list1=list1 + \",\" +j\narray=list1.split(\",\")\nb=[]\na=len(array)\nc=str(a)\nfrappe.response[\"len\"] = c\nfrappe.response[\"message\"] = list1\n",
  "script_type": "API"
 }
]